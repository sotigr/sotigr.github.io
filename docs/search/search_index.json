{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to my little note dump","text":"<p>In here I store notes and guides of my various hobbies, but mostly coding, computer tinkering and 3D printing </p>"},{"location":"Computers/Linux/Gaming/00_Dependencies/","title":"Dependencies","text":""},{"location":"Computers/Linux/Gaming/00_Dependencies/#steam","title":"Steam","text":"<p>Just install steam</p>"},{"location":"Computers/Linux/Gaming/00_Dependencies/#lutris","title":"Lutris","text":"<p>Just install Lutris</p> <p>https://lutris.net/downloads</p>"},{"location":"Computers/Linux/Gaming/00_Dependencies/#mangohud","title":"Mangohud","text":"<p>Install mangohud to show stats overlay and configure graphic apis</p> <p>https://github.com/flightlessmango/MangoHud</p>"},{"location":"Computers/Linux/Gaming/00_Dependencies/#gpu-drivers","title":"Gpu Drivers","text":"<p>AMD: https://wiki.archlinux.org/title/AMDGPU</p> <p>NVIDIA: https://wiki.archlinux.org/title/NVIDIA</p>"},{"location":"Computers/Linux/Gaming/10_Configuration/","title":"Configuration","text":""},{"location":"Computers/Linux/Gaming/10_Configuration/#create-config-files","title":"Create config files","text":"<p>Create directory <code>~/.config/MangoHud</code></p> <p>Create <code>dxvk.conf</code> and <code>MongoHud.conf</code> presets listed bellow.</p> <p>Export the config files:</p> <p>XORG:</p> ~/.profile<pre><code>export MANGOHUD_CONFIGFILE=/home/user/.config/MangoHud/MongoHud.conf\nexport DXVK_CONFIG_FILE=/home/user/.config/MangoHud/dxvk.conf </code></pre> <p>Wayland:</p> ~/.config/environment.d<pre><code>MANGOHUD_CONFIGFILE=/home/user/.config/MangoHud/MongoHud.conf\nDXVK_CONFIG_FILE=/home/user/.config/MangoHud/dxvk.conf </code></pre>"},{"location":"Computers/Linux/Gaming/10_Configuration/#default-values","title":"Default values","text":"<p>Warning: Default config limits fps to 60 you can change it to your liking.</p> <p>Warning: Vsync is also enforced by default</p> dxvk.conf<pre><code># Create the VkSurface on the first call to IDXGISwapChain::Present,\n# rather than when creating the swap chain. Some games that start\n# rendering with a different graphics API may require this option,\n# or otherwise the window may stay black.\n# \n# Supported values: True, False\n# dxgi.deferSurfaceCreation = False\n# d3d9.deferSurfaceCreation = False\n# Enforce a stricter maximum frame latency. Overrides the application\n# setting specified by calling IDXGIDevice::SetMaximumFrameLatency.\n# Setting this to 0 will have no effect.\n# \n# Supported values : 0 - 16\n# dxgi.maxFrameLatency = 0\n# d3d9.maxFrameLatency = 0\n# Enables frame rate limiter. The main purpose of this is to work around\n# bugs in games that have physics or other simulation tied to their frame\n# rate, but do not provide their own limiter.\n#\n# Supported values : Any non-negative integer\ndxgi.maxFrameRate = 60\nd3d9.maxFrameRate = 60\n# Override PCI vendor and device IDs reported to the application. Can\n# cause the app to adjust behaviour depending on the selected values.\n#\n# Supported values: Any four-digit hex number.\n# dxgi.customDeviceId = 0000\n# dxgi.customVendorId = 0000\n# d3d9.customDeviceId = 0000\n# d3d9.customVendorId = 0000\n# Override the reported device description\n#\n# Supported values: Any string.\n# dxgi.customDeviceDesc = \"\"\n# d3d9.customDeviceDesc = \"\"\n# Report Nvidia GPUs as AMD GPUs by default. This is enabled by default\n# to work around issues with NVAPI, but may cause issues in some games.\n#\n# Supported values: True, False\n# dxgi.nvapiHack = True\n# Override maximum amount of device memory and shared system memory\n# reported to the application. This may fix texture streaming issues\n# in games that do not support cards with large amounts of VRAM.\n#\n# Supported values: Any number in Megabytes.\n# dxgi.maxDeviceMemory = 0\n# dxgi.maxSharedMemory = 0\n# Some games think we are on Intel given a lack of NVAPI or\n# AGS/atiadlxx support. Report our device memory as shared memory,\n# and some small amount for a \"carveout\".\n# Supported values: True, False\n# dxgi.emulateUMA = False\n# Override back buffer count for the Vulkan swap chain.\n# Setting this to 0 or less will have no effect.\n#\n# Supported values: Any number greater than or equal to 2.\n# dxgi.numBackBuffers = 0\n# d3d9.numBackBuffers = 0\n# Overrides synchronization interval (Vsync) for presentation.\n# Setting this to 0 disables vertical synchronization entirely.\n# A positive value 'n' will enable Vsync and repeat the same\n# image n times, and a negative value will have no effect.\n#\n# Supported values: Any non-negative number\ndxgi.syncInterval = 1\nd3d9.presentInterval = 1\n# True enables the mailbox present mode in case regular Vsync is disabled.\n# This should avoid tearing, but may be unsupported on some systems\n# or require setting dxgi.numBackBuffers to a higher value in order\n# to work properly. \n#\n# False enables the relaxed fifo present mode in case regular Vsync is enabled.\n# This should result in tearing but reduce stutter if FPS are too low,\n# but may be unsupported on some systems.\n#\n# Please do not report issues with this option.\n#\n# Supported values: Auto, True, False\ndxgi.tearFree = False\nd3d9.tearFree = False\n\n# Assume single-use mode for command lists created on deferred contexts.\n# This may need to be disabled for some applications to avoid rendering\n# issues, which may come at a significant performance cost.\n#\n# Supported values: True, False\n# d3d11.dcSingleUseMode = True\n# Override the maximum feature level that a D3D11 device can be created\n# with. Setting this to a higher value may allow some applications to run\n# that would otherwise fail to create a D3D11 device.\n#\n# Supported values: 9_1, 9_2, 9_3, 10_0, 10_1, 11_0, 11_1, 12_0, 12_1\n# d3d11.maxFeatureLevel = 12_1\n# Overrides the maximum allowed tessellation factor. This can be used to\n# improve performance in titles which overuse tessellation.\n# \n# Supported values: Any number between 8 and 64\n# d3d11.maxTessFactor = 0\n# Enables relaxed pipeline barriers around UAV writes.\n# \n# This may improve performance in some games, but may also introduce\n# rendering issues. Please don't report bugs with the option enabled.\n#\n# Supported values: True, False\n# d3d11.relaxedBarriers = False\n# Ignores barriers around UAV writes from fragment shaders.\n#\n# This may improve performance in some games, but may also introduce\n# rendering issues. Please don't report bugs with the option enabled.\n#\n# Supported values: True, False\n# d3d11.ignoreGraphicsBarriers = False\n# Overrides anisotropic filtering for all samplers. Set this to a positive\n# value to enable AF for all samplers in the game, or to 0 in order to\n# disable AF entirely. Negative values will have no effect.\n# \n# Supported values: Any number between 0 and 16\n# d3d11.samplerAnisotropy = -1\n# d3d9.samplerAnisotropy = -1\n# Changes the mipmap LOD bias for all samplers. The given number will be\n# added to the LOD bias provided by the application, rather than replacing\n# it entirely. Positive values will reduce texture detail, while negative\n# values may increase sharpness at the cost of shimmer.\n#\n# Supported values: Any number between -2.0 and 1.0\n# d3d11.samplerLodBias = 0.0\n# Declares vertex positions as invariant in order to solve\n# potential Z-fighting issues at a small performance cost.\n#\n# Supported values: True, False\n# d3d11.invariantPosition = True\n# d3d9.invariantPosition = True\n# Forces the sample count of all textures to 1, and performs\n# the needed fixups in resolve operations and shaders.\n#\n# Supported values: True, False\n# d3d11.disableMsaa = False\n# Clears workgroup memory in compute shaders to zero. Some games don't do\n# this and rely on undefined behaviour. Enabling may reduce performance.\n#\n# Supported values: True, False\n# d3d11.zeroWorkgroupMemory = False\n# Resource size limit for implicit discards, in kilobytes. For small staging\n# resources mapped with MAP_WRITE, DXVK will sometimes allocate new backing\n# storage in order to avoid GPU synchronization, so setting this too high\n# may cause memory issues, setting it to -1 disables the feature.\n# d3d11.maxImplicitDiscardSize = 256\n# Resource size limit for buffer-mapped dynamic images, in kilobytes.\n# A higher threshold may reduce memory usage and PCI-E bandwidth in\n# some games, but may also increase GPU synchronizations. Setting it\n# to -1 disables the feature.\n# d3d11.maxDynamicImageBufferSize = -1\n# Allocates dynamic resources with the given set of bind flags in\n# cached system memory rather than uncached memory or host-visible\n# VRAM, in order to allow fast readback from the CPU. This is only\n# useful for buggy applications, and may reduce GPU-bound performance.\n#\n# Supported values: Any combination of the following:\n# - v: Vertex buffers\n# - i: Index buffers\n# - c: Constant buffers\n# - r: Shader resources\n# - a: All dynamic resources\n# d3d11.cachedDynamicResources = \"\"\n# Force-enables the D3D11 context lock via the ID3D10Multithread\n# interface. This may be useful to debug race conditions.\n#\n# Supported values: True, False\n# d3d11.enableContextLock = False\n# Sets number of pipeline compiler threads.\n# \n# If the graphics pipeline library feature is enabled, the given\n# number of threads will be used for shader compilation. Some of\n# these threads will be reserved for high-priority work.\n#\n# Supported values:\n# - 0 to use all available CPU cores\n# - any positive number to enforce the thread count\n# dxvk.numCompilerThreads = 0\n# Toggles raw SSBO usage.\n# \n# Uses storage buffers to implement raw and structured buffer\n# views. Enabled by default on hardware which has a storage\n# buffer offset alignment requirement of 4 Bytes (e.g. AMD).\n# Enabling this may improve performance, but is not safe on\n# hardware with higher alignment requirements.\n# \n# Supported values:\n# - Auto: Don't change the default\n# - True, False: Always enable / disable\n# dxvk.useRawSsbo = Auto\n# Controls graphics pipeline library behaviour\n#\n# Can be used to change VK_EXT_graphics_pipeline_library usage for\n# debugging purpose. Doing so will likely result in increased stutter\n# or degraded performance.\n#\n# Supported values:\n# - Auto: Enable if supported, and compile optimized pipelines in the background\n# - True: Enable if supported, but do not compile optimized pipelines\n# - False: Always disable the feature\n# dxvk.enableGraphicsPipelineLibrary = Auto\n# Controls pipeline lifetime tracking\n#\n# If enabled, pipeline libraries will be freed aggressively in order\n# save memory and address space. Has no effect if graphics pipeline\n# libraries are not supported or disabled.\n#\n# Supported values:\n# - Auto: Enable tracking for 32-bit applications only\n# - True: Always enable tracking\n# - False: Always disable tracking\n# dxvk.trackPipelineLifetime = Auto\n# Sets enabled HUD elements\n# \n# Behaves like the DXVK_HUD environment variable if the\n# environment variable is not set, otherwise it will be\n# ignored. The syntax is identical.\n# dxvk.hud = \n# Reported shader model\n#\n# The shader model to state that we support in the device\n# capabilities that the applicatation queries.\n# \n# Supported values:\n# - 1: Shader Model 1\n# - 2: Shader Model 2\n# - 3: Shader Model 3\n# d3d9.shaderModel = 3\n# DPI Awareness\n# \n# Decides whether we should call SetProcessDPIAware on device\n# creation. Helps avoid upscaling blur in modern Windows on\n# Hi-DPI screens/devices.\n#\n# Supported values:\n# - True, False: Always enable / disable\n# d3d9.dpiAware = True\n# Strict Constant Copies\n# \n# Decides whether we should always copy defined constants to\n# the UBO when relative addressing is used, or only when the\n# relative addressing starts a defined constant.\n#\n# Supported values:\n# - True, False: Always enable / disable\n# d3d9.strictConstantCopies = False\n# Strict Pow\n# \n# Decides whether we have an opSelect for handling pow(0,0) = 0\n# otherwise it becomes undefined.\n#\n# Supported values:\n# - True, False: Always enable / disable\n# d3d9.strictPow = True\n# Lenient Clear\n#\n# Decides whether or not we fastpath clear anyway if we are close enough to\n# clearing a full render target.\n#\n# Supported values:\n# - True, False: Always enable / disable\n# d3d9.lenientClear = False\n# Max available memory\n#\n# Changes the max initial value used in tracking and GetAvailableTextureMem\n# Value in Megabytes\n#\n# Supported values:\n# - Max Available Memory: Any int32_t\n# - Memory Tracking Testing: True, False\n# d3d9.maxAvailableMemory = 4096\n# d3d9.memoryTrackTest = False\n# Force enable/disable floating point quirk emulation\n#\n# Force toggle anything * 0 emulation\n# Setting it to True will use a faster but less accurate approach that works for most games.\n# Supported values:\n# - True: Use a faster but less accurate approach. Good enough for most games\n# - False: Disable float emulation completely\n# - Strict: Use a slower but more correct approach. Necessary for some games\n# - Auto: DXVK will pick automatically\n# d3d9.floatEmulation = Auto\n# Enable dialog box mode\n#\n# Changes the default state of dialog box mode.\n# *Disables* exclusive fullscreen when enabled.\n#\n# Supported values:\n# - True, False: Always enable / disable\n# d3d9.enableDialogMode = False\n# Overrides the application's MSAA level on the swapchain\n# \n# Supported values: -1 (application) and 0 to 16 (user override)\n# d3d9.forceSwapchainMSAA = -1\n# Long Mad\n#\n# Should we make our Mads a FFma or do it the long way with an FMul and an FAdd?\n# This solves some rendering bugs in games that have z-pass shaders which\n# don't match entirely to the regular vertex shader in this way.\n#\n# Supported values:\n# - True/False\n# d3d9.longMad = False\n# Device Local Constant Buffers\n#\n# Enables using device local, host accessible memory for constant buffers in D3D9.\n# This tends to actually be slower for some reason on AMD,\n# and the exact same performance on NVIDIA.\n#\n# Supported values:\n# - True/False\n# d3d9.deviceLocalConstantBuffers = False\n# No Explicit Front Buffer\n#\n# Disables the front buffer\n#\n# Supported values:\n# - True/False\n# d3d9.noExplicitFrontBuffer = False\n# Support DF formats\n#\n# Support the vendor extension DF floating point depth formats\n#\n# Supported values:\n# - True/False\n# d3d9.supportDFFormats = True\n# Use D32f for D24\n#\n# Useful for reproducing AMD issues on other hw.\n#\n# Supported values:\n# - True/False\n# d3d9.useD32forD24 = False\n# Support X4R4G4B4\n#\n# Support the X4R4G4B4 format.\n# The Sims 2 is a horrible game made by complete morons.\n#\n# Supported values:\n# - True/False\n# d3d9.supportX4R4G4B4 = True\n# Support D32\n#\n# Support the D32 format.\n#\n# Supported values:\n# - True/False\n# d3d9.supportD32 = True\n# Disable A8 as a Render Target\n#\n# Disable support for A8 format render targets\n# Once again, The Sims 2 is a horrible game made by complete morons.\n#\n# Supported values:\n# - True/False\n# d3d9.disableA8RT = False\n# Support for VCache Query\n#\n# Support for the vcache query\n# Not very important as a user config.\n# Used internally.\n#\n# Supported values:\n# - True/False\n# Defaults to True if vendorId == 0x10de\n# d3d9.supportVCache = True\n# Force Sampler Type Spec Constants\n#\n# Useful if games use the wrong image and sampler\n# type combo like Halo: CE or Spellforce.\n# Can fix rendering in older, broken games in some instances.\n#\n# Supported values:\n# - True/False\n# d3d9.forceSamplerTypeSpecConstants = False\n# Force Aspect Ratio\n#\n# Only exposes modes with a given aspect ratio.\n# Useful for titles that break if they see ultra-wide.\n#\n# Supported values:\n# - Any ratio, ie. \"16:9\", \"4:3\"\n# d3d9.forceAspectRatio = \"\"\n# Allow Discard\n#\n# Allow the discard lock flag to be used\n# Useful if some apps use this incorrectly.\n#\n# Supported values:\n# - True/False\n# d3d9.allowDiscard = True\n# Enumerate by Displays\n#\n# Whether we should enumerate D3D9 adapters by display (windows behaviour)\n# or by physical adapter.\n# May be useful in PRIME setups.\n#\n# Supported values:\n# - True/False\n# d3d9.enumerateByDisplays = True\n# APITrace Mode\n#\n# Makes all host visible buffers cached and coherent\n# Improves performance when apitracing, but also can impact\n# some dumb games.\n#\n# Supported values:\n# - True/False\n# d3d9.apitraceMode = False\n# Seamless Cubes\n#\n# Don't use non seamless cube maps even if they are supported.\n# Non seamless cubes are correct d3d9 behavior, but can produce worse looking edges.\n#\n# Supported values:\n# - True/False\n# d3d9.seamlessCubes = False\n# Debug Utils\n#\n# Enables debug utils as this is off by default, this enables user annotations like BeginEvent()/EndEvent().\n# Alternatively could be enabled with DXVK_DEBUG=markers environment variable.\n#\n# Supported values:\n# - True/False\n# dxvk.enableDebugUtils = False\n# Memory limit for locked D3D9 textures\n#\n# How much virtual memory will be used for textures (in MB).\n# 0 to disable the limit.\n# THIS DOES NOT IMPACT ACTUAL MEMORY CONSUMPTION OR TEXTURE QUALITY.\n# DO NOT CHANGE THIS UNLESS YOU HAVE A VERY GOOD REASON.\n# d3d9.textureMemory = 100\n</code></pre> MongoHud.conf<pre><code>### MangoHud configuration file\n### Uncomment any options you wish to enable. Default options are left uncommented\n### Use some_parameter=0 to disable a parameter (only works with on/off parameters)\n### Everything below can be used / overridden with the environment variable MANGOHUD_CONFIG instead\n################ PERFORMANCE #################\n### Limit the application FPS. Comma-separated list of one or more FPS values (e.g. 0,30,60). 0 means unlimited (unless VSynced)\nfps_limit=60\n### VSync [0-3] 0 = adaptive; 1 = off; 2 = mailbox; 3 = on\nvsync=0\n### OpenGL VSync [0-N] 0 = off; &gt;=1 = wait for N v-blanks, N &gt; 1 acts as a FPS limiter (FPS = display refresh rate / N)\ngl_vsync=1\n################### VISUAL ###################\n### Legacy layout\n# legacy_layout=false\n### Display custom centered text, useful for a header\n# custom_text_center=\n### Display the current system time\ntime\n### Time formatting examples\n# time_format=%H:%M\n# time_format=[ %T %F ]\n# time_format=%X # locally formatted time, because of limited glyph range, missing characters may show as '?' (e.g. Japanese)\n### Display MangoHud version\nversion\n\n### Display the current GPU information\n## Note: gpu_mem_clock also needs \"vram\" to be enabled\ngpu_stats\n# gpu_temp\n# gpu_core_clock\n# gpu_mem_clock\n# gpu_power\n# gpu_text=GPU\n# gpu_load_change\n# gpu_load_value=60,90\n# gpu_load_color=39F900,FDFD09,B22222\n### Display the current CPU information\ncpu_stats\n# cpu_temp\n# cpu_power\n# cpu_text=CPU\n# cpu_mhz\n# cpu_load_change\n# cpu_load_value=60,90\n# cpu_load_color=39F900,FDFD09,B22222\n### Display the current CPU load &amp; frequency for each core\n# core_load\n# core_load_change\n### Display IO read and write for the app (not system)\n# io_stats\n# io_read\n# io_write\n### Display system vram / ram / swap space usage\n# vram\n# ram\n# swap\n### Display per process memory usage\n## Show resident memory and other types, if enabled\n# procmem\n# procmem_shared\n# procmem_virt\n### Display battery information\n# battery\n# battery_icon\n# gamepad_battery\n# gamepad_battery_icon\n### Display FPS and frametime\nfps\n# fps_sampling_period=500\n# fps_color_change\n# fps_value=30,60\n# fps_color=B22222,FDFD09,39F900\nframetime\n# frame_count\n### Display miscellaneous information\n# engine_version\n# gpu_name\n#- vulkan_driver\n# wine\n### Display loaded MangoHud architecture\n# arch\n### Display the frametime line graph\nframe_timing\n# histogram\n### Display GameMode / vkBasalt running status\n# gamemode\n# vkbasalt\n### Display current FPS limit\n# show_fps_limit\n### Display the current resolution\n# resolution\n### Display custom text\n# custom_text=\n### Display output of Bash command in next column\n# exec=\n### Display media player metadata\n# media_player\n# media_player_name=spotify\n## Format metadata, lines are delimited by ; (wip)\n# media_player_format={title};{artist};{album}\n# media_player_format=Track:;{title};By:;{artist};From:;{album}\n### Change the hud font size\n# font_size=24\n# font_scale=1.0\n# font_size_text=24\n# font_scale_media_player=0.55\n# no_small_font\n### Change default font (set location to TTF/OTF file)\n## Set font for the whole hud\n# font_file=\n## Set font only for text like media player metadata\n# font_file_text=\n## Set font glyph ranges. Defaults to Latin-only. Don't forget to set font_file/font_file_text to font that supports these\n## Probably don't enable all at once because of memory usage and hardware limits concerns\n## If you experience crashes or text is just squares, reduce glyph range or reduce font size\n# font_glyph_ranges=korean,chinese,chinese_simplified,japanese,cyrillic,thai,vietnamese,latin_ext_a,latin_ext_b\n### Change the hud position\n# position=top-left\n### Change the corner roundness\n# round_corners=\n### Disable / hide the hud by default\nno_display\n\n### Hud position offset\n# offset_x=\n# offset_y=\n### Hud dimensions\n# width=\n# height=\n# table_columns=\n# cellpadding_y=\n### Hud transparency / alpha\n# background_alpha=0.5\n# alpha=\n### FCAT overlay\n### This enables an FCAT overlay to perform frametime analysis on the final image stream.\n### Enable the overlay\n# fcat\n### Set the width of the FCAT overlay.\n### 24 is a performance optimization on AMD GPUs that should not have adverse effects on nVidia GPUs.\n### A minimum of 20 pixels is recommended by nVidia.\n# fcat_overlay_width=24\n### Set the screen edge, this can be useful for special displays that don't update from top edge to bottom. This goes from 0 (left side) to 3 (top edge), counter-clockwise.\n# fcat_screen_edge=0\n### Color customization\n# text_color=FFFFFF\n# gpu_color=2E9762\n# cpu_color=2E97CB\n# vram_color=AD64C1\n# ram_color=C26693\n# engine_color=EB5B5B\n# io_color=A491D3\n# frametime_color=00FF00\n# background_color=020202\n# media_player_color=FFFFFF\n# wine_color=EB5B5B\n# battery_color=FF9078\n### Specify GPU with PCI bus ID for AMDGPU and NVML stats\n### Set to 'domain:bus:slot.function'\n# pci_dev=0:0a:0.0\n### Blacklist\n# blacklist=\n### Control over socket\n### Enable and set socket name, '%p' is replaced with process id\n# control = mangohud\n# control = mangohud-%p\n################ WORKAROUNDS #################\n### Options starting with \"gl_*\" are for OpenGL\n### Specify what to use for getting display size. Options are \"viewport\", \"scissorbox\" or disabled. Defaults to using glXQueryDrawable\n# gl_size_query=viewport\n### (Re)bind given framebuffer before MangoHud gets drawn. Helps with Crusader Kings III\n# gl_bind_framebuffer=0\n### Don't swap origin if using GL_UPPER_LEFT. Helps with Ryujinx\n# gl_dont_flip=1\n################ INTERACTION #################\n### Change toggle keybinds for the hud &amp; logging\n# toggle_hud=Shift_R+F12\n# toggle_fps_limit=Shift_L+F1\n# toggle_logging=Shift_L+F2\n# reload_cfg=Shift_L+F4\n# upload_log=Shift_L+F3\n#################### LOG #####################\n### Automatically start the log after X seconds\n# autostart_log=1\n### Set amount of time in seconds that the logging will run for\n# log_duration=\n### Change the default log interval, 100 is default\n# log_interval=100\n### Set location of the output files (required for logging)\n# output_folder=/home/&lt;USERNAME&gt;/mangologs\n### Permit uploading logs directly to FlightlessMango.com\n# permit_upload=1\n### Define a '+'-separated list of percentiles shown in the benchmark results\n### Use \"AVG\" to get a mean average. Default percentiles are 97+AVG+1+0.1\n# benchmark_percentiles=97,AVG,1,0.1\n</code></pre>"},{"location":"Computers/Linux/Gaming/10_Configuration/#mangohud-steam","title":"Mangohud Steam","text":"<p>Go to game properties and in the launch options enter: <code>mangohud %command%</code></p>"},{"location":"Computers/Linux/Kvm/0098_Resources/","title":"Resources","text":"<p>https://dividebyzer0.gitlab.io/GPUpassthrough.html</p> <p>https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF</p> <p>Optiomization guide https://leduccc.medium.com/improving-the-performance-of-a-windows-10-guest-on-qemu-a5b3f54d9cf5</p>"},{"location":"Computers/Linux/Kvm/0098_Resources/#pinning","title":"PINNING","text":"<p>https://tlaguz.pl/post/debian-kvm-cpu-pinning/</p>"},{"location":"Computers/Linux/Kvm/0098_Resources/#hugepages","title":"Hugepages","text":"<p>https://access.redhat.com/solutions/36741</p> <p>https://qemu-project.gitlab.io/qemu/search.html?q=invtsc&amp;check_keywords=yes&amp;area=default</p> <p>https://mathiashueber.com/performance-tweaks-gaming-on-virtual-machines/</p>"},{"location":"Computers/Linux/Kvm/0098_Resources/#best-resource","title":"Best resource","text":"<p>https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF</p>"},{"location":"Computers/Linux/Kvm/0098_Resources/#pacman","title":"Pacman","text":"<pre><code>sudo pacman -Sy autoconf\nsudo pacman -Sy automake\nsudo pacman -Sy bin86\nsudo pacman -Sy bison\nsudo pacman -Sy csup\nsudo pacman -Sy diffutils\nsudo pacman -Sy ed\nsudo pacman -Sy fakeroot\nsudo pacman -Sy flex\nsudo pacman -Sy gcc\nsudo pacman -Sy libtool\nsudo pacman -Sy m4\nsudo pacman -Sy patch sudo pacman -Sy make sudo pacman -Sy pkgconfig\n</code></pre>"},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/","title":"Initial Setup","text":""},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/#update-system","title":"Update system","text":"<pre><code>sudo pacman -Syu\n</code></pre>"},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/#install-dependencies","title":"Install dependencies","text":"<pre><code>sudo pacman -S archlinux-keyring\nsudo pacman -S qemu virt-manager virt-viewer dnsmasq vde2 bridge-utils openbsd-netcat\nsudo pacman -S ebtables iptables\n</code></pre>"},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/#install-libguestfs","title":"Install libguestfs","text":"<p>libguestfs is a set of tools used to access and modify virtual machine (VM) disk images. <pre><code>sudo pacman -S libguestfs\n</code></pre></p>"},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/#start-libvirt","title":"Start libvirt","text":"<pre><code>sudo systemctl enable libvirtd.service\nsudo systemctl start libvirtd.service\n</code></pre>"},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/#enable-normal-user-account-to-use-kvm","title":"Enable normal user account to use KVM","text":"<p>Open the file /etc/libvirt/libvirtd.conf for editing. /etc/libvirt/libvirtd.conf<pre><code>...\nunix_sock_group = \"libvirt\"\n...\nunix_sock_rw_perms = \"0770\"\n...\n</code></pre></p>"},{"location":"Computers/Linux/Kvm/0099_Initial_Setup/#add-your-user-account-to-libvirt-group","title":"Add your user account to libvirt group.","text":"<pre><code>sudo usermod -a -G libvirt $(whoami)\nnewgrp libvirt\nsudo systemctl restart libvirtd.service\n</code></pre>"},{"location":"Computers/Linux/Kvm/0100_Specs/","title":"Computer specs","text":"<p>All the configuration was tested with the following system specs</p> Part Name GPU AMD Ryzen\u2122 5 3600 RAM 32 GB MOTHERBOARD MSI B450 TOMAHAWK MAX GPU 1 AMD Radeon 6800 XT GPU 2 NVIDIA GTX 1080 Ti"},{"location":"Computers/Linux/Kvm/0200_IOMMU/","title":"IOMMU","text":"<p>Ensure that AMD-Vi/Intel VT-d is supported and enabled in the BIOS</p>"},{"location":"Computers/Linux/Kvm/0200_IOMMU/#list-out-iommu-groups","title":"List out IOMMU groups","text":"<pre><code>shopt -s nullglob\nfor g in $(find /sys/kernel/iommu_groups/* -maxdepth 0 -type d | sort -V); do\necho \"IOMMU Group ${g##*/}:\"\nfor d in $g/devices/*; do\necho -e \"\\t$(lspci -nns ${d##*/})\"\ndone;\ndone;\n</code></pre> <p>The output will list all the pci devices grouped by their IOMMU group number.</p> <pre><code>IOMMU Group 24:\n    25:00.0 VGA compatible controller [0300]: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] [10de:1b06] (rev a1)\nIOMMU Group 25:\n    25:00.1 Audio device [0403]: NVIDIA Corporation GP102 HDMI Audio Controller [10de:10ef] (rev a1) </code></pre> <p>The GPU you wish to passthrough must not share a group with any other device. But this will not likely be the case. In that case you have to ACS patch the Kernel </p>"},{"location":"Computers/Linux/Kvm/0200_IOMMU/#acs-kernel-patch","title":"ACS Kernel Patch","text":"<pre><code>mkdir build &amp;&amp; cd build\ngit clone https://aur.archlinux.org/linux-vfio.git\nmakepkg -si\n# or\nmakepkg -si --skippgpcheck\n</code></pre>"},{"location":"Computers/Linux/Kvm/0300_Isolate_GPU/","title":"Isolate GPU","text":"<p>Assuming that the IOMMU groups are setup correctly you can now isolate the GPU you wish to passthrough.</p>"},{"location":"Computers/Linux/Kvm/0300_Isolate_GPU/#get-the-gpu-device-ids","title":"Get the GPU device ids","text":"<p>List the IOMMU groups <pre><code>shopt -s nullglob\nfor g in $(find /sys/kernel/iommu_groups/* -maxdepth 0 -type d | sort -V); do\necho \"IOMMU Group ${g##*/}:\"\nfor d in $g/devices/*; do\necho -e \"\\t$(lspci -nns ${d##*/})\"\ndone;\ndone;\n</code></pre></p> <p>The ids will be near the end of the device description and will be formatted like this: <code>[0000:0000]</code></p> <pre><code>IOMMU Group 24:\n    25:00.0 VGA compatible controller [0300]: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] [10de:1b06] (rev a1)\nIOMMU Group 25:\n    25:00.1 Audio device [0403]: NVIDIA Corporation GP102 HDMI Audio Controller [10de:10ef] (rev a1) </code></pre> <p>In my case the ids are <code>10de:1b06</code> and <code>10de:10ef</code></p>"},{"location":"Computers/Linux/Kvm/0300_Isolate_GPU/#edit-the-grub-config","title":"Edit the grub config","text":"<p>Edit the grub file to isolate the gpu on startup</p> <p>Open <code>/etc/default/grub</code> and add the following parameters in the <code>GRUB_CMDLINE_LINUX_DEFAULT</code> option</p> <ul> <li>amd_iommu=on</li> <li>iommu=pt</li> <li>rd.driver.pre=vfio-pci</li> <li>transparent_hugepage=never <code>faster memory access for the VM</code></li> <li>vfio pci.ids=10de:1b06,10de:10ef <code>add your ids accordingly</code></li> <li>pcie_acs_override=downstream,multifunction <code>must add if you ACS patched your kernel</code></li> </ul> <p>My file looks like this:</p> /etc/default/grub<pre><code>...\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash apparmor=1 security=apparmor udev.log_priority=3 amd_iommu=on iommu=pt transparent_hugepage=never rd.driver.pre=vfio-pci vfio pci.ids=10de:1b06,10de:10ef pcie_acs_override=downstream,multifunction\"\n...\n</code></pre> <p>Apply grub configuration <pre><code>sudo grub-mkconfig -o /boot/grub/grub.cfg\n</code></pre></p>"},{"location":"Computers/Linux/Kvm/0400_Cpu_Pinning/","title":"Cpu pinning and isolation","text":"<p>Cpu pinning lets the virtual machine to run only on specified vcpus. You can combine this with cpu core isolation to achieve maximum performance.</p>"},{"location":"Computers/Linux/Kvm/0400_Cpu_Pinning/#use-lstopo-to-reference-the-cpu-topology","title":"Use lstopo to reference the cpu topology","text":"<p><pre><code>lstopo\n</code></pre> This is the output for AMD Ryzen\u2122 5 3600  </p> <p>From that we can link each core to its vcpus This cpu has 6 cpus and 2 threads per cpu, that makes for 12 vcpus:</p> CORE VCPU 1 VCPU 2 CORE 0 0 6 CORE 1 1 7 CORE 2 2 8 CORE 3 3 9 CORE 4 4 10 CORE 5 5 11 <p>Now you have to decide which and how many core to reserve for the host and how many for the guest.</p> <p>For this setup we will use core <code>0,1,2,3</code> for the guest vm and leave core <code>4</code> and <code>5</code> for the host.</p>"},{"location":"Computers/Linux/Kvm/0400_Cpu_Pinning/#get-the-vcpus","title":"Get the vcpus","text":"<p>From the topology of the cpu we can now find out the vcpus we need for the guest and the host.</p> <p>For the guest <code>0,6,1,7,2,8,3,9</code> vpus or <code>0-3,6-9</code> </p> <p>For the host <code>4,10,5,11</code> vcpus or <code>4-5,10-11</code></p>"},{"location":"Computers/Linux/Kvm/0400_Cpu_Pinning/#dynamic-cpu-isolation","title":"Dynamic cpu isolation","text":"<p>To isolate the vcpus at runtime we need to create a libvirt hook</p> <p>Create a script named <code>/etc/libvirt/hooks/qemu.d/isolate-cpus.sh</code></p> <p>Paste the following script after editing the <code>reserved</code> and <code>cores</code> variables</p> <p>The <code>reserved</code> variable refers to the host vcpus, so for my case <code>4-5,10-11</code></p> <p>The <code>cores</code> variable must have the whole range of vcpus of the system <code>0-11</code></p> <p>Script Source /etc/libvirt/hooks/qemu.d/isolate-cpus.sh<pre><code>#!/bin/bash\n# Cores reserved for the host machine\n# Must include QEMU IO/Emulation cores if configured\n# Ex: 1st Core -&gt; reserved=0\n# Ex: 1st &amp; 2nt Cores -&gt; reserved=0,1\n# Ex: 1st Physical Core (16 Virtual Cores) -&gt; reserved=0,8\nreserved=4-5,10-11\n\n# Host core range numbered from 0 to core count - 1\n# You must put all the cores of your host CPU\n# Cores not in $cores_for_host are for Guests\n# Ex: 8 Cores  -&gt; cores=0-7\n# Ex: 16 Cores -&gt; cores=0-15\ncores=0-11\n\n# See Arch wiki for more informations https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#Isolating_pinned_CPUs\ncommand=$2\nvalid_cmds='prepare,start,started,stopped,release,migrate,restore'\nif [[ $command == \"started\" ]]; then\necho \"Hook/Qemu : isolate-cpus.sh : Isolate CPUS\"\nsystemctl set-property --runtime -- system.slice AllowedCPUs=$reserved\nsystemctl set-property --runtime -- user.slice AllowedCPUs=$reserved\nsystemctl set-property --runtime -- init.slice AllowedCPUs=$reserved\nelif [[ $command == \"release\" ]]; then\necho \"Hook/Qemu : isolate-cpus.sh : Allow all CPUS\"\nsystemctl set-property --runtime -- system.slice AllowedCPUs=$cores\nsystemctl set-property --runtime -- user.slice AllowedCPUs=$cores\nsystemctl set-property --runtime -- init.slice AllowedCPUs=$cores\nelif [[ $valid_cmds =~ $command ]]; then\necho \"Hook/Qemu : isolate-cpus.sh : Supported command but do nothing\"\nelse\necho \"Invalid commands. Ex: ./script vm_name [prepare|start|started|stopped|release|migrate|restore]\" &gt;&amp;2\nexit 1\nfi\n</code></pre></p> <p>With this method libvirt will isolate the cpus when the vm starts and return them to the host when the vm stops</p>"},{"location":"Computers/Linux/Kvm/0400_Cpu_Pinning/#static-cpu-isolation","title":"Static cpu isolation","text":"<p>This method is more straight forward but the host will always ignore the cpus reserved for the guest</p> <p>Edit the <code>/etc/default/grub</code> file and add to the GRUB_CMDLINE_LINUX_DEFAULT parameter:</p> <ul> <li>isolcpus=0-3,6-9</li> <li>nohz_full=0-3,6-9</li> <li>rcu_nocbs=0-3,6-9</li> </ul> <p>Apply grub configuration <pre><code>sudo grub-mkconfig -o /boot/grub/grub.cfg\n</code></pre></p>"},{"location":"Computers/Linux/Kvm/0500_SwitchKeyboard/","title":"Switch keyboard and mouse","text":"<pre><code>git clone https://github.com/pavolelsig/evdev_helper.git\ncd evdev_helper\nsudo ./run_ev_helper.sh\n</code></pre> <p>Add the content of the <code>evdev.txt</code> to you vm configuration</p> <p>Press <code>LCTRL</code> + <code>RCTRL</code> to transfer keyboard and mouse input from the host to the vm and vice versa</p>"},{"location":"Computers/Linux/Kvm/0600_Fix_Audio_Latency%20copy/","title":"Fix audio latency","text":"<p>WARNING: Possibly unstable</p> <pre><code>&lt;qemu:commandline&gt;\n...\n  &lt;qemu:env name=\"QEMU_AUDIO_TIMER_PERIOD\" value=\"100\"/&gt;\n&lt;qemu:env name=\"QEMU_AUDIO_DRV\" value=\"pa\"/&gt;\n...\n&lt;/qemu:commandline&gt;\n</code></pre>"},{"location":"Computers/Linux/Kvm/0700_Virtual_Disks/","title":"RAW Virtual Disks","text":""},{"location":"Computers/Linux/Kvm/0700_Virtual_Disks/#create-and-format-virtual-disk","title":"Create and format virtual disk","text":"<pre><code>qemu-img create myimage.img 60G\nqemu-system-x86_64 -drive format=raw,file=myimage.img\n</code></pre>"},{"location":"Computers/Linux/Kvm/0800_Hugepages/","title":"Hugepages memory optimization","text":""},{"location":"Computers/Linux/Kvm/0800_Hugepages/#reference","title":"Reference","text":"<p>https://wiki.archlinux.org/title/PCI_passthrough_via_OVMF#Huge_memory_pages</p>"},{"location":"Computers/Linux/Kvm/0800_Hugepages/#setup","title":"Setup","text":"<p>According to the resource above it is preferable to use 1gb pages and reserve an amount of memory at startup for the guest to use.</p>"},{"location":"Computers/Linux/Kvm/0800_Hugepages/#grub","title":"Grub","text":"<p>Edit <code>/etc/default/grub</code> and add the following parameters to <code>GRUB_CMDLINE_LINUX_DEFAULT</code> <pre><code>default_hugepagesz=1G hugepagesz=1G hugepages=16\n</code></pre> Apply grub configuration <pre><code>sudo grub-mkconfig -o /boot/grub/grub.cfg\n</code></pre> This will reserver 16 GB for the guest. Make sure there is some spare memory for the host.</p>"},{"location":"Computers/Linux/Kvm/0800_Hugepages/#guest-configuration","title":"Guest configuration","text":"<p>To enable hugepage usage for the guest add the following to the guest's xml configuration</p> <pre><code>...\n&lt;memoryBacking&gt;\n&lt;hugepages/&gt;\n&lt;/memoryBacking&gt;\n...\n</code></pre> <p>To disable transparent pages add <code>transparent_hugepage=never</code> to the grub config</p>"},{"location":"Computers/Linux/Kvm/1000_Win10-11Vm/","title":"Win 10-11 Vm config","text":""},{"location":"Computers/Linux/Kvm/1000_Win10-11Vm/#avoid-bsods-on-new-windows-10-installs","title":"Avoid BSODs on New Windows 10 Installs","text":"/etc/modprobe.d/kvm.conf<pre><code>options kvm ignore_msrs=1\noptions kvm report_ignored_msrs=0\n</code></pre>"},{"location":"Computers/Linux/Kvm/1000_Win10-11Vm/#drivers","title":"Drivers","text":"<p>Run windows in safe mode and install missing drivers from the iso</p> <ul> <li>Win drivers ISO</li> </ul> <p>Restart windows in recovery and disable driver signature validation, then install the realtek ac97 driver</p> <ul> <li>AC97 Realtek audio: Download</li> </ul>"},{"location":"Computers/Linux/Kvm/1000_Win10-11Vm/#windows-11-and-tpm","title":"Windows 11 and TPM","text":"<p>For windows 11 add a tmp device from the vm manager</p> <p>Also select bios with secure boot <pre><code>&lt;os&gt; ...\n  &lt;loader readonly=\"yes\" type=\"pflash\"&gt;/usr/share/edk2-ovmf/x64/OVMF_CODE.secboot.fd&lt;/loader&gt; ...\n&lt;/os&gt;\n</code></pre></p>"},{"location":"Computers/Linux/Kvm/1000_Win10-11Vm/#troubleshooting-for-games","title":"Troubleshooting for games","text":"<p>Some games and software will not run if hyper-v is not enabled from the <code>Turn Windows features on or off</code> panel</p> <p>In some cases the hypervisor must be hidden from the guest to bypass some anti-cheat, this will cost some performance and in some games may be dangerous and your account may be banned</p> <p>Add:  <pre><code>&lt;kvm&gt;\n&lt;hidden state='on'/&gt;\n&lt;/kvm&gt;\n</code></pre></p> <p>Add in cpu config: <pre><code>&lt;feature policy='disable' name='hypervisor'/&gt;\n</code></pre></p>"},{"location":"Computers/Linux/Kvm/1000_Win10-11Vm/#config","title":"Config","text":"<pre><code>&lt;domain xmlns:qemu=\"http://libvirt.org/schemas/domain/qemu/1.0\" type=\"kvm\"&gt;\n&lt;name&gt;win10-gaming&lt;/name&gt;\n&lt;uuid&gt;9c310e4c-3e1e-4a9c-8ce8-2041b64060a5&lt;/uuid&gt;\n&lt;metadata&gt;\n&lt;libosinfo:libosinfo xmlns:libosinfo=\"http://libosinfo.org/xmlns/libvirt/domain/1.0\"&gt;\n&lt;libosinfo:os id=\"http://microsoft.com/win/10\"/&gt;\n&lt;/libosinfo:libosinfo&gt;\n&lt;/metadata&gt;\n&lt;memory unit=\"KiB\"&gt;15625000&lt;/memory&gt;\n&lt;currentMemory unit=\"KiB\"&gt;15625000&lt;/currentMemory&gt;\n&lt;memoryBacking&gt;\n&lt;hugepages/&gt;\n&lt;/memoryBacking&gt;\n&lt;vcpu placement=\"static\"&gt;10&lt;/vcpu&gt;\n&lt;iothreads&gt;1&lt;/iothreads&gt;\n&lt;cputune&gt;\n&lt;vcpupin vcpu=\"0\" cpuset=\"0\"/&gt;\n&lt;vcpupin vcpu=\"1\" cpuset=\"6\"/&gt;\n&lt;vcpupin vcpu=\"2\" cpuset=\"1\"/&gt;\n&lt;vcpupin vcpu=\"3\" cpuset=\"7\"/&gt;\n&lt;vcpupin vcpu=\"4\" cpuset=\"2\"/&gt;\n&lt;vcpupin vcpu=\"5\" cpuset=\"8\"/&gt;\n&lt;vcpupin vcpu=\"6\" cpuset=\"3\"/&gt;\n&lt;vcpupin vcpu=\"7\" cpuset=\"9\"/&gt;\n&lt;vcpupin vcpu=\"8\" cpuset=\"4\"/&gt;\n&lt;vcpupin vcpu=\"9\" cpuset=\"10\"/&gt;\n&lt;emulatorpin cpuset=\"5,11\"/&gt;\n&lt;iothreadpin iothread=\"1\" cpuset=\"5,11\"/&gt;\n&lt;/cputune&gt;\n&lt;os&gt;\n&lt;type arch=\"x86_64\" machine=\"pc-q35-7.1\"&gt;hvm&lt;/type&gt;\n&lt;loader readonly=\"yes\" type=\"pflash\"&gt;/usr/share/edk2-ovmf/x64/OVMF_CODE.fd&lt;/loader&gt;\n&lt;nvram&gt;/var/lib/libvirt/qemu/nvram/win10-gaming_VARS.fd&lt;/nvram&gt;\n&lt;bootmenu enable=\"no\"/&gt;\n&lt;smbios mode=\"host\"/&gt;\n&lt;/os&gt;\n&lt;features&gt;\n&lt;acpi/&gt;\n&lt;pae/&gt;\n&lt;hyperv mode=\"custom\"&gt;\n&lt;relaxed state=\"on\"/&gt;\n&lt;vapic state=\"on\"/&gt;\n&lt;spinlocks state=\"on\" retries=\"8191\"/&gt;\n&lt;vpindex state=\"on\"/&gt;\n&lt;synic state=\"on\"/&gt;\n&lt;stimer state=\"on\"/&gt;\n&lt;vendor_id state=\"on\" value=\"694206789ab\"/&gt;\n&lt;frequencies state=\"on\"/&gt;\n&lt;/hyperv&gt;\n&lt;vmport state=\"off\"/&gt;\n&lt;ioapic driver=\"kvm\"/&gt;\n&lt;/features&gt;\n&lt;cpu mode=\"host-passthrough\" check=\"none\" migratable=\"on\"&gt;\n&lt;topology sockets=\"1\" dies=\"1\" cores=\"5\" threads=\"2\"/&gt;\n&lt;feature policy=\"require\" name=\"topoext\"/&gt;\n&lt;feature policy=\"require\" name=\"invtsc\"/&gt;\n&lt;feature policy=\"disable\" name=\"vmx\"/&gt;\n&lt;feature policy=\"require\" name=\"pdpe1gb\"/&gt;\n&lt;feature policy=\"require\" name=\"amd-ssbd\"/&gt;\n&lt;feature policy=\"disable\" name=\"amd-no-ssb\"/&gt;\n&lt;feature policy=\"require\" name=\"stibp\"/&gt;\n&lt;/cpu&gt;\n&lt;clock offset=\"localtime\"&gt;\n&lt;timer name=\"rtc\" tickpolicy=\"catchup\"/&gt;\n&lt;timer name=\"pit\" tickpolicy=\"delay\"/&gt;\n&lt;timer name=\"hpet\" present=\"no\"/&gt;\n&lt;timer name=\"hypervclock\" present=\"yes\"/&gt;\n&lt;/clock&gt;\n&lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;\n&lt;on_reboot&gt;restart&lt;/on_reboot&gt;\n&lt;on_crash&gt;destroy&lt;/on_crash&gt;\n&lt;pm&gt;\n&lt;suspend-to-mem enabled=\"no\"/&gt;\n&lt;suspend-to-disk enabled=\"no\"/&gt;\n&lt;/pm&gt;\n&lt;devices&gt;\n&lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;\n&lt;disk type=\"file\" device=\"disk\"&gt;\n&lt;driver name=\"qemu\" type=\"raw\" cache=\"none\" discard=\"unmap\"/&gt;\n&lt;source file=\"/run/media/sotig/vmData2/win10-gaming.img\"/&gt;\n&lt;target dev=\"sdd\" bus=\"sata\"/&gt;\n&lt;boot order=\"1\"/&gt;\n&lt;address type=\"drive\" controller=\"0\" bus=\"0\" target=\"0\" unit=\"3\"/&gt;\n&lt;/disk&gt;\n&lt;disk type=\"file\" device=\"disk\"&gt;\n&lt;driver name=\"qemu\" type=\"raw\" cache=\"none\" discard=\"unmap\"/&gt;\n&lt;source file=\"/run/media/sotig/vmData2/gamedata.img\"/&gt;\n&lt;target dev=\"sdf\" bus=\"sata\"/&gt;\n&lt;address type=\"drive\" controller=\"0\" bus=\"0\" target=\"0\" unit=\"5\"/&gt;\n&lt;/disk&gt;\n&lt;controller type=\"usb\" index=\"0\" model=\"qemu-xhci\" ports=\"15\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x02\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"0\" model=\"pcie-root\"/&gt;\n&lt;controller type=\"pci\" index=\"1\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"1\" port=\"0x10\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x0\" multifunction=\"on\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"2\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"2\" port=\"0x11\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x1\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"3\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"3\" port=\"0x12\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x2\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"4\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"4\" port=\"0x13\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x3\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"5\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"5\" port=\"0x14\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x4\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"6\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"6\" port=\"0x15\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x5\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"7\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"7\" port=\"0x16\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x6\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"8\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"8\" port=\"0x17\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x7\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"9\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"9\" port=\"0x18\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x0\" multifunction=\"on\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"10\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"10\" port=\"0x19\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x1\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"11\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"11\" port=\"0x1a\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x2\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"12\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"12\" port=\"0x1b\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x3\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"13\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"13\" port=\"0x1c\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x4\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"14\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"14\" port=\"0x1d\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x5\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"15\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"15\" port=\"0x1e\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x6\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"16\" model=\"pcie-to-pci-bridge\"&gt;\n&lt;model name=\"pcie-pci-bridge\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x01\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"sata\" index=\"0\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x1f\" function=\"0x2\"/&gt;\n&lt;/controller&gt;\n&lt;interface type=\"bridge\"&gt;\n&lt;mac address=\"52:54:00:dd:65:2e\"/&gt;\n&lt;source bridge=\"virbr0\"/&gt;\n&lt;model type=\"virtio\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x07\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/interface&gt;\n&lt;input type=\"mouse\" bus=\"ps2\"/&gt;\n&lt;input type=\"keyboard\" bus=\"ps2\"/&gt;\n&lt;input type=\"tablet\" bus=\"virtio\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x03\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/input&gt;\n&lt;graphics type=\"spice\"&gt;\n&lt;listen type=\"none\"/&gt;\n&lt;image compression=\"off\"/&gt;\n&lt;/graphics&gt;\n&lt;sound model=\"ich9\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x1b\" function=\"0x0\"/&gt;\n&lt;/sound&gt;\n&lt;audio id=\"1\" type=\"spice\"/&gt;\n&lt;video&gt;\n&lt;model type=\"none\"/&gt;\n&lt;/video&gt;\n&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n&lt;source&gt;\n&lt;address domain=\"0x0000\" bus=\"0x25\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/source&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x04\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/hostdev&gt;\n&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n&lt;source&gt;\n&lt;address domain=\"0x0000\" bus=\"0x25\" slot=\"0x00\" function=\"0x1\"/&gt;\n&lt;/source&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x05\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/hostdev&gt;\n&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n&lt;source&gt;\n&lt;address domain=\"0x0000\" bus=\"0x2a\" slot=\"0x00\" function=\"0x3\"/&gt;\n&lt;/source&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x08\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/hostdev&gt;\n&lt;watchdog model=\"itco\" action=\"reset\"/&gt;\n&lt;memballoon model=\"virtio\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x09\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/memballoon&gt;\n&lt;/devices&gt;\n&lt;qemu:commandline&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=kbd1,evdev=/dev/input/by-id/usb-Razer_Razer_BlackWidow-event-kbd,grab_all=on,repeat=on\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=kbd2,evdev=/dev/input/by-id/usb-Razer_Razer_BlackWidow-if01-event-kbd,grab_all=on,repeat=on\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=mouse1,evdev=/dev/input/by-id/usb-Razer_Razer_BlackWidow-if02-event-mouse\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=mouse2,evdev=/dev/input/by-id/usb-SteelSeries_SteelSeries_Rival_310_eSports_Mouse-if01-event-mouse\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=kbd3,evdev=/dev/input/by-id/usb-SteelSeries_SteelSeries_Rival_310_eSports_Mouse-if02-event-kbd,grab_all=on,repeat=on\"/&gt;\n&lt;qemu:env name=\"QEMU_AUDIO_TIMER_PERIOD\" value=\"100\"/&gt;\n&lt;qemu:env name=\"QEMU_AUDIO_DRV\" value=\"pa\"/&gt;\n&lt;/qemu:commandline&gt;\n&lt;/domain&gt; </code></pre>"},{"location":"Computers/Linux/Kvm/1100_LinuxVm/","title":"Linux Vm config","text":""},{"location":"Computers/Linux/Kvm/1100_LinuxVm/#config","title":"Config","text":"<pre><code> &lt;domain xmlns:qemu=\"http://libvirt.org/schemas/domain/qemu/1.0\" type=\"kvm\"&gt;\n&lt;name&gt;brive&lt;/name&gt;\n&lt;uuid&gt;93f78f12-0745-4280-b812-524420ce0a9f&lt;/uuid&gt;\n&lt;metadata&gt;\n&lt;libosinfo:libosinfo xmlns:libosinfo=\"http://libosinfo.org/xmlns/libvirt/domain/1.0\"&gt;\n&lt;libosinfo:os id=\"http://fedoraproject.org/fedora/unknown\"/&gt;\n&lt;/libosinfo:libosinfo&gt;\n&lt;/metadata&gt;\n&lt;memory unit=\"KiB\"&gt;16777216&lt;/memory&gt;\n&lt;currentMemory unit=\"KiB\"&gt;16777216&lt;/currentMemory&gt;\n&lt;memoryBacking&gt;\n&lt;hugepages/&gt;\n&lt;/memoryBacking&gt;\n&lt;vcpu placement=\"static\"&gt;10&lt;/vcpu&gt;\n&lt;iothreads&gt;1&lt;/iothreads&gt;\n&lt;cputune&gt;\n&lt;vcpupin vcpu=\"0\" cpuset=\"0\"/&gt;\n&lt;vcpupin vcpu=\"1\" cpuset=\"6\"/&gt;\n&lt;vcpupin vcpu=\"2\" cpuset=\"1\"/&gt;\n&lt;vcpupin vcpu=\"3\" cpuset=\"7\"/&gt;\n&lt;vcpupin vcpu=\"4\" cpuset=\"2\"/&gt;\n&lt;vcpupin vcpu=\"5\" cpuset=\"8\"/&gt;\n&lt;vcpupin vcpu=\"6\" cpuset=\"3\"/&gt;\n&lt;vcpupin vcpu=\"7\" cpuset=\"9\"/&gt;\n&lt;vcpupin vcpu=\"8\" cpuset=\"4\"/&gt;\n&lt;vcpupin vcpu=\"9\" cpuset=\"10\"/&gt;\n&lt;emulatorpin cpuset=\"5,11\"/&gt;\n&lt;iothreadpin iothread=\"1\" cpuset=\"5,11\"/&gt;\n&lt;/cputune&gt;\n&lt;sysinfo type=\"smbios\"&gt;\n&lt;bios&gt;\n&lt;entry name=\"vendor\"&gt;American Megatrends Inc.&lt;/entry&gt;\n&lt;entry name=\"version\"&gt;3.50&lt;/entry&gt;\n&lt;/bios&gt;\n&lt;system&gt;\n&lt;entry name=\"manufacturer\"&gt;Micro-Star International Co., Ltd&lt;/entry&gt;\n&lt;entry name=\"product\"&gt;MS-7C02&lt;/entry&gt;\n&lt;entry name=\"version\"&gt;1.0&lt;/entry&gt;\n&lt;entry name=\"serial\"&gt;To be filled by O.E.M.&lt;/entry&gt;\n&lt;entry name=\"family\"&gt;To be filled by O.E.M.&lt;/entry&gt;\n&lt;/system&gt;\n&lt;/sysinfo&gt;\n&lt;os&gt;\n&lt;type arch=\"x86_64\" machine=\"pc-q35-7.1\"&gt;hvm&lt;/type&gt;\n&lt;loader readonly=\"yes\" type=\"pflash\"&gt;/usr/share/edk2-ovmf/x64/OVMF_CODE.secboot.fd&lt;/loader&gt;\n&lt;nvram&gt;/var/lib/libvirt/qemu/nvram/brive_VARS.fd&lt;/nvram&gt;\n&lt;bootmenu enable=\"no\"/&gt;\n&lt;smbios mode=\"host\"/&gt;\n&lt;/os&gt;\n&lt;features&gt;\n&lt;acpi/&gt;\n&lt;apic/&gt;\n&lt;pae/&gt;\n&lt;hyperv mode=\"custom\"&gt;\n&lt;relaxed state=\"on\"/&gt;\n&lt;vapic state=\"on\"/&gt;\n&lt;spinlocks state=\"on\" retries=\"8191\"/&gt;\n&lt;vpindex state=\"on\"/&gt;\n&lt;synic state=\"on\"/&gt;\n&lt;stimer state=\"on\"/&gt;\n&lt;vendor_id state=\"on\" value=\"694206789ab\"/&gt;\n&lt;frequencies state=\"on\"/&gt;\n&lt;/hyperv&gt;\n&lt;vmport state=\"off\"/&gt;\n&lt;ioapic driver=\"kvm\"/&gt;\n&lt;/features&gt;\n&lt;cpu mode=\"host-passthrough\" check=\"none\" migratable=\"on\"&gt;\n&lt;topology sockets=\"1\" dies=\"1\" cores=\"5\" threads=\"2\"/&gt;\n&lt;feature policy=\"require\" name=\"topoext\"/&gt;\n&lt;feature policy=\"require\" name=\"invtsc\"/&gt;\n&lt;feature policy=\"disable\" name=\"vmx\"/&gt;\n&lt;feature policy=\"require\" name=\"pdpe1gb\"/&gt;\n&lt;feature policy=\"require\" name=\"amd-ssbd\"/&gt;\n&lt;feature policy=\"disable\" name=\"amd-no-ssb\"/&gt;\n&lt;feature policy=\"require\" name=\"stibp\"/&gt;\n&lt;/cpu&gt;\n&lt;clock offset=\"localtime\"&gt;\n&lt;timer name=\"rtc\" tickpolicy=\"catchup\"/&gt;\n&lt;timer name=\"pit\" tickpolicy=\"delay\"/&gt;\n&lt;timer name=\"hpet\" present=\"no\"/&gt;\n&lt;timer name=\"hypervclock\" present=\"yes\"/&gt;\n&lt;/clock&gt;\n&lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;\n&lt;on_reboot&gt;restart&lt;/on_reboot&gt;\n&lt;on_crash&gt;destroy&lt;/on_crash&gt;\n&lt;pm&gt;\n&lt;suspend-to-mem enabled=\"no\"/&gt;\n&lt;suspend-to-disk enabled=\"no\"/&gt;\n&lt;/pm&gt;\n&lt;devices&gt;\n&lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;\n&lt;disk type=\"file\" device=\"disk\"&gt;\n&lt;driver name=\"qemu\" type=\"raw\" cache=\"none\" discard=\"unmap\"/&gt;\n&lt;source file=\"/mnt/vmData/brive-new.img\"/&gt;\n&lt;target dev=\"sdf\" bus=\"sata\"/&gt;\n&lt;boot order=\"1\"/&gt;\n&lt;address type=\"drive\" controller=\"0\" bus=\"0\" target=\"0\" unit=\"5\"/&gt;\n&lt;/disk&gt;\n&lt;controller type=\"usb\" index=\"0\" model=\"qemu-xhci\" ports=\"15\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x02\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"0\" model=\"pcie-root\"/&gt;\n&lt;controller type=\"pci\" index=\"1\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"1\" port=\"0x10\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x0\" multifunction=\"on\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"2\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"2\" port=\"0x11\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x1\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"3\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"3\" port=\"0x12\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x2\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"4\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"4\" port=\"0x13\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x3\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"5\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"5\" port=\"0x14\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x4\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"6\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"6\" port=\"0x15\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x5\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"7\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"7\" port=\"0x16\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x6\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"8\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"8\" port=\"0x17\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x02\" function=\"0x7\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"9\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"9\" port=\"0x18\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x0\" multifunction=\"on\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"10\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"10\" port=\"0x19\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x1\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"11\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"11\" port=\"0x1a\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x2\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"12\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"12\" port=\"0x1b\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x3\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"13\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"13\" port=\"0x1c\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x4\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"14\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"14\" port=\"0x1d\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x5\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"15\" model=\"pcie-root-port\"&gt;\n&lt;model name=\"pcie-root-port\"/&gt;\n&lt;target chassis=\"15\" port=\"0x1e\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x03\" function=\"0x6\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"pci\" index=\"16\" model=\"pcie-to-pci-bridge\"&gt;\n&lt;model name=\"pcie-pci-bridge\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x01\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"sata\" index=\"0\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x1f\" function=\"0x2\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"sata\" index=\"1\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x10\" slot=\"0x01\" function=\"0x0\"/&gt;\n&lt;/controller&gt;\n&lt;controller type=\"scsi\" index=\"0\" model=\"virtio-scsi\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x09\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/controller&gt;\n&lt;interface type=\"bridge\"&gt;\n&lt;mac address=\"52:54:00:97:ab:fe\"/&gt;\n&lt;source bridge=\"virbr0\"/&gt;\n&lt;model type=\"virtio\"/&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x07\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/interface&gt;\n&lt;serial type=\"pty\"&gt;\n&lt;target type=\"isa-serial\" port=\"0\"&gt;\n&lt;model name=\"isa-serial\"/&gt;\n&lt;/target&gt;\n&lt;/serial&gt;\n&lt;console type=\"pty\"&gt;\n&lt;target type=\"serial\" port=\"0\"/&gt;\n&lt;/console&gt;\n&lt;input type=\"mouse\" bus=\"ps2\"/&gt;\n&lt;input type=\"keyboard\" bus=\"ps2\"/&gt;\n&lt;input type=\"tablet\" bus=\"virtio\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x03\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/input&gt;\n&lt;graphics type=\"spice\"&gt;\n&lt;listen type=\"none\"/&gt;\n&lt;image compression=\"off\"/&gt;\n&lt;/graphics&gt;\n&lt;sound model=\"ich9\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x00\" slot=\"0x1b\" function=\"0x0\"/&gt;\n&lt;/sound&gt;\n&lt;audio id=\"1\" type=\"spice\"/&gt;\n&lt;video&gt;\n&lt;model type=\"none\"/&gt;\n&lt;/video&gt;\n&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n&lt;source&gt;\n&lt;address domain=\"0x0000\" bus=\"0x25\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/source&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x04\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/hostdev&gt;\n&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n&lt;source&gt;\n&lt;address domain=\"0x0000\" bus=\"0x25\" slot=\"0x00\" function=\"0x1\"/&gt;\n&lt;/source&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x05\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/hostdev&gt;\n&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n&lt;source&gt;\n&lt;address domain=\"0x0000\" bus=\"0x2a\" slot=\"0x00\" function=\"0x3\"/&gt;\n&lt;/source&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x08\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/hostdev&gt;\n&lt;watchdog model=\"itco\" action=\"reset\"/&gt;\n&lt;memballoon model=\"virtio\"&gt;\n&lt;address type=\"pci\" domain=\"0x0000\" bus=\"0x06\" slot=\"0x00\" function=\"0x0\"/&gt;\n&lt;/memballoon&gt;\n&lt;/devices&gt;\n&lt;qemu:commandline&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=kbd1,evdev=/dev/input/by-id/usb-Razer_Razer_BlackWidow-event-kbd,grab_all=on,repeat=on\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=kbd2,evdev=/dev/input/by-id/usb-Razer_Razer_BlackWidow-if01-event-kbd,grab_all=on,repeat=on\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=mouse1,evdev=/dev/input/by-id/usb-Razer_Razer_BlackWidow-if02-event-mouse\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=mouse2,evdev=/dev/input/by-id/usb-SteelSeries_SteelSeries_Rival_310_eSports_Mouse-if01-event-mouse\"/&gt;\n&lt;qemu:arg value=\"-object\"/&gt;\n&lt;qemu:arg value=\"input-linux,id=kbd3,evdev=/dev/input/by-id/usb-SteelSeries_SteelSeries_Rival_310_eSports_Mouse-if02-event-kbd,grab_all=on,repeat=on\"/&gt;\n&lt;qemu:env name=\"QEMU_AUDIO_TIMER_PERIOD\" value=\"0\"/&gt;\n&lt;qemu:env name=\"QEMU_AUDIO_DRV\" value=\"pa\"/&gt;\n&lt;/qemu:commandline&gt;\n&lt;/domain&gt;\n</code></pre>"},{"location":"Computers/Linux/Packages/PGP-Keys/","title":"PGP Keys","text":""},{"location":"Computers/Linux/Packages/PGP-Keys/#to-search-for-key","title":"To search for key:","text":"<pre><code>gpg --keyserver https://keyserver.ubuntu.com --search-keys {key}\n</code></pre>"},{"location":"Computers/Linux/Packages/PGP-Keys/#to-retrieve-key","title":"To retrieve key","text":"<pre><code>gpg --keyserver keyserver.ubuntu.com --recv-key A88441BD4864F95BEE08E63A71EB474019940E11\n</code></pre>"},{"location":"Computers/Linux/Packages/PGP-Keys/#skip-key-check-not-recommended-first-verify-keys-manually","title":"Skip key check (Not recommended first verify keys manually)","text":"<pre><code>makepkg --skippgpcheck\n</code></pre>"},{"location":"Computers/Linux/Packages/PGP-Keys/#skip-key-check-yay-not-recommended-first-verify-keys-manually","title":"Skip key check yay (Not recommended first verify keys manually)","text":"<pre><code>yay -S foo --mflags \"--skippgpcheck\"\n</code></pre>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/","title":"The Dactyl-ManuForm Keyboard","text":"<p>Github repo</p> <p>This is a fork of the Dactyl, a parameterized, split-hand, concave, columnar, ergonomic keyboard.</p> <p></p> <p>The main change is that the thumb cluster was adapted from the ManuForm keyboard (geekhack). The walls were changed to just drop to the floor. The keyboard is paramaterized to allow adjusting the following: </p> <ul> <li>Rows: 4 - 6 </li> <li>Columns: 5 and up</li> <li>Row curvature</li> <li>Column curvature</li> <li>Row tilt (tenting)</li> <li>Column tilt</li> <li>Column offsets</li> <li>Height</li> </ul> <p>I built a 4x5 version (40% size) for myself. The default has a bit more tenting than the Dactyl. See the following model files for configurations that may be most common:</p> <ul> <li>40% size, (4x5)</li> <li>60% size, (5x6)</li> </ul>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#assembly","title":"Assembly","text":""},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#generating-a-design","title":"Generating a Design","text":"<p>Setting up the Clojure environment * Install the Clojure runtime * Install the Leiningen project manager * Install OpenSCAD</p> <p>Generating the design * Run <code>lein repl</code> * Load the file <code>(load-file \"src/dactyl_keyboard/dactyl.clj\")</code> * This will regenerate the <code>things/*.scad</code> files * Use OpenSCAD to open a <code>.scad</code> file. * Make changes to design, repeat <code>load-file</code>, OpenSCAD will watch for changes and rerender. * When done, use OpenSCAD to export STL files</p> <p>Tips * Some other ways to evaluate the clojure design file * Example designing with clojure</p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#printing","title":"Printing","text":"<p>Pregenerated STL files are available in the things/ directory.  When a model is generated, it also generates a <code>.scad</code> model for a bottom plate.  This can be exported to a DXF file in OpenSCAD. The things/ directory also has DXF files for the bottom plate. When laser cut, some of the inside cuts will need to be removed. </p> <p>This model can be tricky to print.  It's wide, so I've had problems with PLA on a Makerbot with edges warping.  This can cause the printer to think its head is jammed.  Even if it successfully prints, warping can cause problems.  On one print, the RJ-9 holder was squished, so I had to cut down my connector to fit.</p> <p>If printed at Shapeways or other professional shops, I would not expect such problems. </p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#thingiverse","title":"Thingiverse","text":"<p>The 4x5 STL left/right pair from the things/ directory is in the thingiverse for public printing</p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#wiring","title":"Wiring","text":"<p>Here are materials I used for wiring.</p> <ul> <li>Two Arduino Pro Micros</li> <li>Heat-set inserts</li> <li>M3 wafer-head screws, 5mm</li> <li>Copper tape</li> <li>#32 magnet wire</li> <li>#30 wire</li> <li>3-mm cast acrylic</li> <li>Veroboard stripboard</li> <li>1N4148 diodes</li> <li>Female RJ-9 connectors</li> </ul> <p>I wired one half using the traditional approach of using the legs of a diode to form the row connections.  (I'm not great at soldering, so this was challenging for me.) For this side, I used magnet wire to wire columns. That worked okay.  The magnet wire is small enough, it wants to move around, and it's hard to tell if you have a good connection.</p> <p></p> <p>For another half, I used stripboard for the row connections.  This allowed me to presolder all of the diodes.  Then, I hot-glued this in place and finished the soldering of the other diode ends.  I like this approach quite a lot.  Connections for the diodes were much easier with one end fixed down.  On this half, I also used copper tape to connect columns.  This worked a bit better than the magnet wire for me.  For a future version, I may try just bare tinned copper wire for columns (something like #20).  With the stripboard, it's pretty easy keeping row and column connections separate.</p> <p></p> <p>Note that a telephone handset cable has leads that are reversed, so take this into account when connecting these leads to the controller.</p> <p>The 3D printed part is the main keyboard.  You can attach a bottom plate with screws.  The case has holes for heat-set inserts designed to hold 3- to 6-mm long M3 screws.  Then, I used wafer-head screws to connect a bottom plate.  If wires aren't dangling, a bottom plate may not be needed.  You need something on the bottom to keep the keyboard from sliding around.  Without a plate, you could use a rubber pad, or you could dip the bottom of the keyboard in PlastiDip.</p> <p>For more photos of the first complete wiring of v0.4, see Imgur.</p> <p>This is how the rows/columns wire to the keys and the ProMicro </p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#alternative-row-driven-wiring-diagram-for-promicro","title":"Alternative row-driven wiring diagram for ProMicro:","text":"<p>NOTE: you also make sure the firmware is set up correctly (ex: change row pins with col pins)</p> <p></p> <p></p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#firmware","title":"Firmware","text":"<p>Firmware goes hand in hand with how you wire the circuit.  I adapted the QMK firmware here.  This allows each side to work separately or together.  This site also shows connections for the Arduino Pro Micro controllers.</p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/info/#license","title":"License","text":"<p>Copyright \u00a9 2015-2017 Matthew Adereth and Tom Short</p> <p>The source code for generating the models (everything excluding the things/ and resources/ directories is distributed under the GNU AFFERO GENERAL PUBLIC LICENSE Version 3.  The generated models and PCB designs are distributed under the Creative Commons Attribution-NonCommercial-ShareAlike License Version 3.0.</p>"},{"location":"IRL%20Projects/Keyboards/Dactyl%20keynoard/parts/","title":"Parts","text":"<p>Download</p>"}]}